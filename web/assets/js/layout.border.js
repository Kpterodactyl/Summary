!function($){"use strict";function _isNumber(n){return n instanceof Number||"number"==typeof n}$.fn.borderLayout=function(){var setBounds=function(element,bounds){element.style.position="absolute",element.style.boxSizing="border-box";for(var name in bounds){var v=bounds[name];_isNumber(v)&&(v=parseInt(v)+"px"),element.style[name]=v}$(element).trigger("size.change")},toNumber=function(sNumber,sum){return"%"===sNumber[sNumber.length-1]?sum*parseInt(sNumber)/100:parseInt(sNumber)},calculateLength=function(sNumber,sum,min,max){var n=toNumber(sNumber,sum);return min&&(min=toNumber(min,sum),min>n)?min:max&&(max=toNumber(max,sum),n>max)?max:n};return this.each(function(){function setWestAndEast(){west&&(temp=west._data.width,temp&&(temp=calculateLength(temp,width,west._data["min-width"],west._data["max-width"]),left=temp,temp2=parseInt(west._data.left)||0,temp2&&(widthRest-=temp2,left+=temp2),widthRest-=temp,setBounds(west,{top:top,left:temp2,width:temp,height:heightRest}))),east&&(temp=east._data.width,temp&&(temp=calculateLength(temp,width,east._data["min-width"],east._data["max-width"]),temp2=parseInt(east._data.right)||0,temp2&&(widthRest-=temp2),widthRest-=temp,setBounds(east,{top:top,right:temp2,width:temp,height:heightRest})))}function setNorthAndSouth(){north&&(temp=north._data.height,temp&&(temp=calculateLength(temp,height,north._data["min-height"],north._data["max-height"]),heightRest-=temp,top=temp,setBounds(north,{top:0,left:left,width:widthRest,height:temp}))),south&&(temp=south._data.height,temp&&(temp=calculateLength(temp,height,south._data["min-height"],south._data["max-height"]),heightRest-=temp,setBounds(south,{bottom:0,left:left,height:temp,width:widthRest})))}this.style.boxSizing="border-box",this.style.overflow="hidden",(this==document.body||$(this).hasClass("layout--body"))&&setBounds(this,{top:0,bottom:0,left:0,right:0});for(var center,north,south,east,west,isH=$(this).hasClass("layout--h"),width=this.clientWidth,height=this.clientHeight,i=0,children=this.children;i<children.length;){var child=children[i++],data=child.getAttribute("data-options");if(data){data=data.replace(/(['"])?([a-zA-Z0-9\-]+)(['"])?:/g,'"$2":'),data=data.replace(/'/g,'"'),data="{"+data+"}";try{data=JSON.parse(data)}catch(error){continue}var region=data.region;region&&(child._data=data,/center/i.test(region)?center=child:/north/i.test(region)?north=child:/south/i.test(region)?south=child:/east/i.test(region)?east=child:/west/i.test(region)&&(west=child))}}var temp,temp2,widthRest=width,heightRest=height,top=0,left=0;isH?(setWestAndEast(),setNorthAndSouth()):(setNorthAndSouth(),setWestAndEast()),center&&setBounds(center,{top:top,left:left,width:widthRest,height:heightRest})})},$(function(){$(".layout").borderLayout(),$(window).resize(function(){$(".layout").borderLayout()})})}(jQuery);